<%- include("_header") -%>

<h1>PostgreSQL Application</h1>

<% if(message !== "success") { %>
  <h1>We Encountered an Error</h1>
  <p><%= message %></p>
<% } else { %>
  <h2>There are <%= model.length %> Products in the Database</h2>
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Description</th>
        <th scope="col">Price</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% model.forEach(product => { %>
        <tr>
          <td><%= product.prod_id %></td>
          <td><%= product.prod_name %></td>
          <td><%= product.prod_desc %></td>
          <td><%= product.prod_price %></td>
          <td>
            <a href="/edit/<%= product.prod_id %>" class="btn btn-warning btn-sm">Edit</a>

            <form action="/delete/<%= product.prod_id %>" method="POST" style="display:inline;">
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
<% } %>

<%- include("_footer") -%>